{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _initializerDefineProperty from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _applyDecoratedDescriptor from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"C:\\\\Users\\\\guymu\\\\Desktop\\\\bootCamp\\\\final-hack\\\\final-project\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _descriptor, _descriptor2;\n\nimport { observable, action, computed } from \"mobx\";\nimport axios from \"axios\";\nimport { toJS } from \"mobx\";\nvar Store = (_dec = action.bound, _dec2 = action.bound, _dec3 = action.bound, _dec4 = action.bound, (_class =\n/*#__PURE__*/\nfunction () {\n  function Store() {\n    _classCallCheck(this, Store);\n\n    _initializerDefineProperty(this, \"userInfo\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"currentUser\", _descriptor2, this);\n  }\n\n  _createClass(Store, [{\n    key: \"initUser\",\n    value: function initUser() {\n      var _this = this;\n\n      axios.get(\"/initUser\").then(function (answer) {\n        var data = {\n          name: answer.data.name,\n          email: answer.data.email,\n          phone: answer.data.phone,\n          seller: answer.data.seller,\n          id: answer.data.id,\n          products: answer.data.products\n        };\n        console.log(toJS(data));\n        _this.userInfo = data;\n      });\n    }\n  }, {\n    key: \"addUser\",\n    value: function () {\n      var _addUser = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(userInfo) {\n        var answer;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.post(\"/newUser\", userInfo);\n\n              case 2:\n                answer = _context.sent;\n\n                if (answer.data.exist === true) {\n                  this.currentUser(answer.data.data);\n                  localStorage.setItem(\"user\", \"true\");\n                }\n\n                return _context.abrupt(\"return\", answer.data.exist);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function addUser(_x) {\n        return _addUser.apply(this, arguments);\n      };\n    }() // works good\n\n  }, {\n    key: \"userLogIn\",\n    value: function () {\n      var _userLogIn = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(userInfo) {\n        var answer;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.get(\"/LogIn\", {\n                  params: {\n                    name: userInfo.Name,\n                    password: userInfo.Password\n                  }\n                });\n\n              case 2:\n                answer = _context2.sent;\n\n                if (!(answer.data === false)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", null);\n\n              case 7:\n                this.initUser();\n                localStorage.setItem(\"user\", \"true\");\n                return _context2.abrupt(\"return\", true);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function userLogIn(_x2) {\n        return _userLogIn.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"userLogOut\",\n    value: function () {\n      var _userLogOut = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(userId) {\n        var answer;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios.put(\"/logOut\", {\n                  userId: userId\n                });\n\n              case 2:\n                answer = _context3.sent;\n\n                if (answer.data === true) {\n                  localStorage.clear();\n                }\n\n                this.currentUser({});\n                return _context3.abrupt(\"return\", answer.data);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function userLogOut(_x3) {\n        return _userLogOut.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"addNewProduct\",\n    value: function () {\n      var _addNewProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(productInfo, userId) {\n        var answer;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return axios.post(\"/addNewProduct\", {\n                  productInfo: productInfo,\n                  userId: userId\n                });\n\n              case 2:\n                answer = _context4.sent;\n\n                if (!(answer.data === true)) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", true);\n\n              case 7:\n                return _context4.abrupt(\"return\", false);\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function addNewProduct(_x4, _x5) {\n        return _addNewProduct.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAllProducts\",\n    value: function () {\n      var _getAllProducts = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var answer;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return axios.get(\"/products\");\n\n              case 2:\n                answer = _context5.sent;\n                this.products = answer.data;\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function getAllProducts() {\n        return _getAllProducts.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"userData\",\n    get: function get() {\n      return this.userInfo;\n    }\n  }]);\n\n  return Store;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"userInfo\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"userData\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"userData\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"initUser\", [_dec], Object.getOwnPropertyDescriptor(_class.prototype, \"initUser\"), _class.prototype), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"currentUser\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this2 = this;\n\n    return function (info) {\n      _this2.userInfo = info;\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"addUser\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"addUser\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"userLogIn\", [_dec3], Object.getOwnPropertyDescriptor(_class.prototype, \"userLogIn\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"userLogOut\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"userLogOut\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"addNewProduct\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"addNewProduct\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"getAllProducts\", [_dec4], Object.getOwnPropertyDescriptor(_class.prototype, \"getAllProducts\"), _class.prototype)), _class));\nvar store = new Store();\nwindow.store = store;\nexport default store;","map":{"version":3,"sources":["C:\\Users\\guymu\\Desktop\\bootCamp\\final-hack\\final-project\\client\\src\\store\\Store.js"],"names":["observable","action","computed","axios","toJS","Store","bound","get","then","answer","data","name","email","phone","seller","id","products","console","log","userInfo","post","exist","currentUser","localStorage","setItem","params","Name","password","Password","initUser","userId","put","clear","productInfo","info","store","window"],"mappings":"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","sourcesContent":["import { observable, action, computed } from \"mobx\";\r\nimport axios from \"axios\";\r\nimport { toJS } from \"mobx\";\r\nclass Store {\r\n  @observable\r\n  userInfo = {};\r\n  @computed\r\n  get userData() {\r\n    return this.userInfo;\r\n  }\r\n  @action.bound\r\n  initUser() {\r\n    axios.get(\"/initUser\").then(answer => {\r\n      let data = {\r\n        name: answer.data.name,\r\n        email: answer.data.email,\r\n        phone: answer.data.phone,\r\n        seller: answer.data.seller,\r\n        id: answer.data.id,\r\n        products: answer.data.products\r\n      };\r\n      console.log(toJS(data));\r\n      this.userInfo = data;\r\n    });\r\n  }\r\n\r\n  @action.bound\r\n  currentUser = info => {\r\n    this.userInfo = info;\r\n  };\r\n\r\n  @action\r\n  async addUser(userInfo) {\r\n    let answer = await axios.post(\"/newUser\", userInfo);\r\n    if (answer.data.exist === true) {\r\n      this.currentUser(answer.data.data);\r\n      localStorage.setItem(\"user\", \"true\");\r\n    }\r\n    return answer.data.exist;\r\n  }\r\n\r\n  // works good\r\n  @action.bound\r\n  async userLogIn(userInfo) {\r\n    let answer = await axios.get(\"/LogIn\", {\r\n      params: { name: userInfo.Name, password: userInfo.Password }\r\n    });\r\n    if (answer.data === false) {\r\n      return null;\r\n    } else {\r\n      this.initUser();\r\n      localStorage.setItem(\"user\", \"true\");\r\n      return true;\r\n    }\r\n  }\r\n  @action\r\n  async userLogOut(userId) {\r\n    let answer = await axios.put(\"/logOut\", { userId });\r\n    if (answer.data === true) {\r\n      localStorage.clear();\r\n    }\r\n    this.currentUser({});\r\n    return answer.data;\r\n  }\r\n  @action\r\n  async addNewProduct(productInfo, userId) {\r\n    let answer = await axios.post(\"/addNewProduct\", { productInfo, userId });\r\n    if (answer.data === true) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  @action.bound\r\n  async getAllProducts() {\r\n    let answer = await axios.get(\"/products\");\r\n    this.products = answer.data;\r\n  }\r\n}\r\n\r\nconst store = new Store();\r\nwindow.store = store;\r\nexport default store;\r\n"]},"metadata":{},"sourceType":"module"}